<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Twin-Stick Shooter</title>
  </head>
  <body>
    <div id="game-container">
      <canvas id="game-canvas"></canvas>

      <!-- Crosshair + Hitmarker -->
      <div id="crosshair">
        <svg id="crosshair-svg" width="48" height="48" viewBox="-24 -24 48 48">
          <!-- Ammo arc (behind crosshair lines) -->
          <g transform="rotate(-90)">
            <circle class="ammo-arc-bg" cx="0" cy="0" r="20" />
            <circle class="ammo-arc-fill" cx="0" cy="0" r="20" />
            <circle class="ammo-arc-active" cx="0" cy="0" r="20" />
            <circle class="ammo-arc-perfect" cx="0" cy="0" r="20" />
          </g>
          <!-- Crosshair lines (positions updated by JS) -->
          <line class="xh-line" data-dir="up"    x1="0" y1="-10" x2="0" y2="-4" />
          <line class="xh-line" data-dir="down"  x1="0" y1="4"   x2="0" y2="10" />
          <line class="xh-line" data-dir="left"  x1="-10" y1="0" x2="-4" y2="0" />
          <line class="xh-line" data-dir="right" x1="4"   y1="0" x2="10" y2="0" />
          <!-- Center dot -->
          <circle cx="0" cy="0" r="1.5" fill="white" />
        </svg>
        <!-- Hitmarker overlay (rotated 45°) -->
        <svg id="hitmarker" width="40" height="40" viewBox="-20 -20 40 40">
          <!-- Body hit: 4 lines at 45° angles -->
          <line class="hm-line hm-outer" x1="-12" y1="-12" x2="-6" y2="-6" />
          <line class="hm-line hm-outer" x1="6" y1="-6" x2="12" y2="-12" />
          <line class="hm-line hm-outer" x1="-12" y1="12" x2="-6" y2="6" />
          <line class="hm-line hm-outer" x1="6" y1="6" x2="12" y2="12" />
          <!-- Headshot extra: 4 inner lines (doubled) -->
          <line class="hm-line hm-inner" x1="-9" y1="-9" x2="-4" y2="-4" />
          <line class="hm-line hm-inner" x1="4" y1="-4" x2="9" y2="-9" />
          <line class="hm-line hm-inner" x1="-9" y1="9" x2="-4" y2="4" />
          <line class="hm-line hm-inner" x1="4" y1="4" x2="9" y2="9" />
        </svg>
      </div>
      <div id="hud">
        <div id="hud-score">Score: 0</div>
        <div id="hud-hp-container">
          <div id="hud-hp-bar"></div>
        </div>
      </div>
      <div id="ammo-counter">30 / 30</div>
      <div id="grenade-counter">Grenades: 3</div>
      <div id="reload-popup" class="hidden">
        <div id="reload-popup-title"></div>
        <div id="reload-popup-detail"></div>
      </div>
      <div id="multikill-popup" class="hidden"></div>
      <div id="game-over" class="hidden">
        <div id="game-over-content">
          <h1>GAME OVER</h1>
          <p id="final-score">Score: 0</p>
          <button id="restart-btn">Play Again</button>
        </div>
      </div>

      <!-- Start Screen -->
      <div id="start-screen">
        <div id="start-screen-content">
          <pre id="start-title">
 _____ _    _ ___ _  _     ___ _____ ___ ___ _  __
|_   _| |  | |_ _| \| |   / __|_   _|_ _/ __| |/ /
  | | | |/\| || || .` |   \__ \ | |  | | (__| ' &lt;
  |_| |__/\__|___|_|\_|   |___/ |_| |___\___|_|\_\

      ___ _  _ ___  ___ _____ ___ ___
     / __| || / _ \/ _ \_   _| __| _ \
     \__ \ __ | (_) (_) || | | _||   /
     |___/_||_|\___/\___/ |_| |___|_|_\
          </pre>
          <p id="start-prompt">Press any key or click to start</p>
          <button id="fullscreen-btn" class="menu-btn" style="margin-top: 24px;">Fullscreen</button>
        </div>
      </div>

      <!-- Escape / Pause Menu -->
      <div id="escape-menu" class="hidden">
        <div id="escape-menu-content">
          <h1>PAUSED</h1>
          <div id="escape-menu-buttons">
            <button class="menu-btn" data-action="resume">Resume</button>
            <button class="menu-btn" data-action="save-full">Save Full Recording</button>
            <button class="menu-btn" data-action="save-ring">Save Ring Buffer</button>
            <button class="menu-btn" data-action="load-replay">Load Replay</button>
            <button class="menu-btn" data-action="fullscreen">Fullscreen</button>
            <button class="menu-btn" data-action="toggle-console">Dev Console: OFF</button>
            <button class="menu-btn" data-action="quit">Quit to Title</button>
          </div>
        </div>
      </div>

      <!-- Replay Browser -->
      <div id="replay-browser" class="hidden">
        <div id="replay-browser-content">
          <h1>REPLAYS</h1>
          <div id="replay-list"></div>
          <button class="menu-btn" id="replay-browser-back">Back</button>
        </div>
      </div>

      <!-- Developer Console -->
      <div id="dev-console" class="hidden">
        <div id="dev-console-output"></div>
        <input id="dev-console-input" type="text" placeholder="Type a command..." autocomplete="off" spellcheck="false" />
      </div>

      <!-- Replay Controls -->
      <div id="replay-controls" class="hidden">
        <div id="replay-controls-bar">
          <button id="replay-play-pause">⏸</button>
          <input type="range" id="replay-scrub" min="0" max="100" value="0" />
          <span id="replay-tick-display">0 / 0</span>
          <select id="replay-speed">
            <option value="1">1x</option>
            <option value="2">2x</option>
            <option value="4">4x</option>
          </select>
          <button id="replay-exit">Exit</button>
        </div>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
